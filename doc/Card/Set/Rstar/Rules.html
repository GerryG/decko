<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: Card::Set::Rstar::Rules
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../../';
  framesUrl = "../../../frames.html#!Card/Set/Rstar/Rules.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../../../_index.html">Index (R)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Card.html" title="Card (class)">Card</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Set.html" title="Card::Set (module)">Set</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Rstar.html" title="Card::Set::Rstar (module)">Rstar</a></span></span>
     &raquo; 
    <span class="title">Rules</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../../../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../../../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: Card::Set::Rstar::Rules
  
  
  
</h1>

<dl class="box">
  
  
    
      <dt class="r1">Extended by:</dt>
      <dd class="r1"><span class='object_link'><a href="../../Set.html" title="Card::Set (module)">Card::Set</a></span></dd>
      
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">../sites/core-dev/tmp/set/rstar/1000-rules.rb</dd>
  
</dl>
<div class="clear"></div>








  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rule_set-instance_method" title="#rule_set (instance method)">- (Object) <strong>rule_set</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rule_set_key-instance_method" title="#rule_set_key (instance method)">- (Object) <strong>rule_set_key</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rule_set_name-instance_method" title="#rule_set_name (instance method)">- (Object) <strong>rule_set_name</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rule_setting_name-instance_method" title="#rule_setting_name (instance method)">- (Object) <strong>rule_setting_name</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rule_user-instance_method" title="#rule_user (instance method)">- (Object) <strong>rule_user</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rule_user_name-instance_method" title="#rule_user_name (instance method)">- (Object) <strong>rule_user_name</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rule_user_setting_name-instance_method" title="#rule_user_setting_name (instance method)">- (Object) <strong>rule_user_setting_name</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_options-instance_method" title="#set_options (instance method)">- (Object) <strong>set_options</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>~~~~~~~~~~ determine the set options to which the user can apply the rule.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_prototype-instance_method" title="#set_prototype (instance method)">- (Object) <strong>set_prototype</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../Set.html" title="Card::Set (module)">Card::Set</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../Set.html#all_set%3F-instance_method" title="Card::Set#all_set? (method)">all_set?</a></span>, <span class='object_link'><a href="../../Set.html#card_accessor-instance_method" title="Card::Set#card_accessor (method)">card_accessor</a></span>, <span class='object_link'><a href="../../Set.html#card_reader-instance_method" title="Card::Set#card_reader (method)">card_reader</a></span>, <span class='object_link'><a href="../../Set.html#card_writer-instance_method" title="Card::Set#card_writer (method)">card_writer</a></span>, <span class='object_link'><a href="../../Set.html#clean_empty_module_from_hash-class_method" title="Card::Set.clean_empty_module_from_hash (method)">clean_empty_module_from_hash</a></span>, <span class='object_link'><a href="../../Set.html#clean_empty_modules-class_method" title="Card::Set.clean_empty_modules (method)">clean_empty_modules</a></span>, <span class='object_link'><a href="../../Set.html#define_on_format-instance_method" title="Card::Set#define_on_format (method)">define_on_format</a></span>, <span class='object_link'><a href="../../Set.html#event-instance_method" title="Card::Set#event (method)">event</a></span>, <span class='object_link'><a href="../../Set.html#extended-class_method" title="Card::Set.extended (method)">extended</a></span>, <span class='object_link'><a href="../../Set.html#format-instance_method" title="Card::Set#format (method)">format</a></span>, <span class='object_link'><a href="../../Set.html#process_base_module_list-class_method" title="Card::Set.process_base_module_list (method)">process_base_module_list</a></span>, <span class='object_link'><a href="../../Set.html#process_base_modules-class_method" title="Card::Set.process_base_modules (method)">process_base_modules</a></span>, <span class='object_link'><a href="../../Set.html#register_set-class_method" title="Card::Set.register_set (method)">register_set</a></span>, <span class='object_link'><a href="../../Set.html#register_set_format-instance_method" title="Card::Set#register_set_format (method)">register_set_format</a></span>, <span class='object_link'><a href="../../Set.html#shortname-instance_method" title="Card::Set#shortname (method)">shortname</a></span>, <span class='object_link'><a href="../../Set.html#view-instance_method" title="Card::Set#view (method)">view</a></span>, <span class='object_link'><a href="../../Set.html#write_tmp_file-class_method" title="Card::Set.write_tmp_file (method)">write_tmp_file</a></span></p>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="rule_set-instance_method">
  
    - (<tt><span class='object_link'><a href="../../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>rule_set</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


344
345
346
347
348
349
350</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '../sites/core-dev/tmp/set/rstar/1000-rules.rb', line 344</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rule_set'>rule_set</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_is_user_rule?'>is_user_rule?</span>
    <span class='kw'>self</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='op'>-</span><span class='int'>3</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_trunk'>trunk</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rule_set_key-instance_method">
  
    - (<tt><span class='object_link'><a href="../../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>rule_set_key</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


332
333
334</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '../sites/core-dev/tmp/set/rstar/1000-rules.rb', line 332</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rule_set_key'>rule_set_key</span>
  <span class='id identifier rubyid_rule_set_name'>rule_set_name</span><span class='period'>.</span><span class='id identifier rubyid_key'>key</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rule_set_name-instance_method">
  
    - (<tt><span class='object_link'><a href="../../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>rule_set_name</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


336
337
338
339
340
341
342</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '../sites/core-dev/tmp/set/rstar/1000-rules.rb', line 336</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rule_set_name'>rule_set_name</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_is_user_rule?'>is_user_rule?</span>
    <span class='id identifier rubyid_cardname'>cardname</span><span class='period'>.</span><span class='id identifier rubyid_trunk_name'>trunk_name</span><span class='period'>.</span><span class='id identifier rubyid_trunk_name'>trunk_name</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_cardname'>cardname</span><span class='period'>.</span><span class='id identifier rubyid_trunk_name'>trunk_name</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rule_setting_name-instance_method">
  
    - (<tt><span class='object_link'><a href="../../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>rule_setting_name</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


352
353
354</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '../sites/core-dev/tmp/set/rstar/1000-rules.rb', line 352</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rule_setting_name'>rule_setting_name</span>
  <span class='id identifier rubyid_cardname'>cardname</span><span class='period'>.</span><span class='id identifier rubyid_tag'>tag</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rule_user-instance_method">
  
    - (<tt><span class='object_link'><a href="../../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>rule_user</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


368
369
370</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '../sites/core-dev/tmp/set/rstar/1000-rules.rb', line 368</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rule_user'>rule_user</span>
  <span class='id identifier rubyid_is_user_rule?'>is_user_rule?</span> <span class='op'>?</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rule_user_name-instance_method">
  
    - (<tt><span class='object_link'><a href="../../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>rule_user_name</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


364
365
366</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '../sites/core-dev/tmp/set/rstar/1000-rules.rb', line 364</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rule_user_name'>rule_user_name</span>
  <span class='id identifier rubyid_is_user_rule?'>is_user_rule?</span> <span class='op'>?</span> <span class='id identifier rubyid_cardname'>cardname</span><span class='period'>.</span><span class='id identifier rubyid_trunk_name'>trunk_name</span><span class='period'>.</span><span class='id identifier rubyid_tag'>tag</span> <span class='op'>:</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rule_user_setting_name-instance_method">
  
    - (<tt><span class='object_link'><a href="../../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>rule_user_setting_name</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


356
357
358
359
360
361
362</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '../sites/core-dev/tmp/set/rstar/1000-rules.rb', line 356</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rule_user_setting_name'>rule_user_setting_name</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_is_user_rule?'>is_user_rule?</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_rule_user_name'>rule_user_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>+</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_rule_setting_name'>rule_setting_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
   <span class='id identifier rubyid_rule_setting_name'>rule_setting_name</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_options-instance_method">
  
    - (<tt><span class='object_link'><a href="../../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>set_options</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>~~~~~~~~~~ determine the set options to which the user can apply the rule.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '../sites/core-dev/tmp/set/rstar/1000-rules.rb', line 374</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_options'>set_options</span>

  <span class='id identifier rubyid_first'>first</span> <span class='op'>=</span>  <span class='id identifier rubyid_new_card?'>new_card?</span> <span class='op'>?</span> <span class='int'>0</span> <span class='op'>:</span> <span class='id identifier rubyid_set_prototype'>set_prototype</span><span class='period'>.</span><span class='id identifier rubyid_set_names'>set_names</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_to_name'>to_name</span><span class='period'>.</span><span class='id identifier rubyid_key'>key</span> <span class='op'>==</span> <span class='id identifier rubyid_rule_set_key'>rule_set_key</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_rule_cnt'>rule_cnt</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_fallback_set'>fallback_set</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_set_prototype'>set_prototype</span><span class='period'>.</span><span class='id identifier rubyid_set_names'>set_names</span><span class='lbracket'>[</span><span class='id identifier rubyid_first'>first</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_set_name'>set_name</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='const'>Card</span><span class='period'>.</span><span class='id identifier rubyid_exists?'>exists?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_set_name'>set_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>+</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_rule_user_setting_name'>rule_user_setting_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_rule_cnt'>rule_cnt</span> <span class='op'>+=</span> <span class='int'>1</span>
      <span class='id identifier rubyid_res'>res</span> <span class='op'>&lt;&lt;</span> <span class='kw'>if</span> <span class='id identifier rubyid_rule_cnt'>rule_cnt</span> <span class='op'>==</span> <span class='int'>1</span>
               <span class='lbracket'>[</span><span class='id identifier rubyid_set_name'>set_name</span><span class='comma'>,</span><span class='symbol'>:current</span><span class='rbracket'>]</span>
             <span class='kw'>else</span>
               <span class='id identifier rubyid_fallback_set'>fallback_set</span> <span class='op'>||=</span> <span class='id identifier rubyid_set_name'>set_name</span>
               <span class='lbracket'>[</span><span class='id identifier rubyid_set_name'>set_name</span><span class='comma'>,</span><span class='symbol'>:overwritten</span><span class='rbracket'>]</span>
             <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_res'>res</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_rule_cnt'>rule_cnt</span> <span class='op'>&lt;</span> <span class='int'>1</span> <span class='op'>?</span> <span class='lbracket'>[</span><span class='id identifier rubyid_set_name'>set_name</span><span class='comma'>,</span><span class='symbol'>:enabled</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='lbracket'>[</span><span class='id identifier rubyid_set_name'>set_name</span><span class='comma'>,</span><span class='symbol'>:disabled</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># fallback_set = if first &gt; 0
</span>  <span class='comment'>#                 res[0..(first-1)].find do |set_name|
</span>  <span class='comment'>#                   Card.exists?(&quot;#{set_name}+#{rule_user_setting_name}&quot;)
</span>  <span class='comment'>#                 end
</span>  <span class='comment'>#               end
</span>  <span class='comment'># last = res.index{|s| s.to_name.key == cardname.trunk_name.key} || -1
</span>  <span class='comment'># # note, the -1 can happen with virtual cards because the self set doesn&#39;t show up in the set_names.  FIXME!!
</span>  <span class='comment'># [res[first..last], fallback_set]
</span>  <span class='comment'>#
</span>  <span class='comment'># The broadest set should always be the currently applied rule
</span>  <span class='comment'># (for anything more general, they must explicitly choose to &quot;DELETE&quot; the current one)
</span>  <span class='comment'># the narrowest rule should be the one attached to the set being viewed.  So, eg, if you&#39;re looking at the &quot;*all plus&quot; set, you shouldn&#39;t
</span>  <span class='comment'># have the option to create rules based on arbitrary narrower sets, though narrower sets will always apply to whatever prototype we create
</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_res'>res</span><span class='comma'>,</span> <span class='id identifier rubyid_fallback_set'>fallback_set</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_prototype-instance_method">
  
    - (<tt><span class='object_link'><a href="../../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>set_prototype</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


411
412
413
414
415
416
417</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '../sites/core-dev/tmp/set/rstar/1000-rules.rb', line 411</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_prototype'>set_prototype</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_is_user_rule?'>is_user_rule?</span>
    <span class='kw'>self</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='op'>-</span><span class='int'>3</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_prototype'>prototype</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_trunk'>trunk</span><span class='period'>.</span><span class='id identifier rubyid_prototype'>prototype</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Thu Jul  2 10:29:16 2015 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.1.5).
</div>

  </body>
</html>