%div._nest-editor
  .nest-header.d-flex.ml-2
    %h5.mt-1 Link
    .ml-auto
      = link_to fa_icon(:close), path: "#", "data-dismiss": tm_snippet_editor_mode, class: "text-dark p-1 ml-1"

  .form
    .form-row.align-items-center.mb-4.ml-1
      .col-9
        .input-group{class: [link_snippet.field? ? "show-prefix" : "hide-prefix"]}
          .input-group-prepend._field-indicator
            .input-group-text.text-muted
              +
          = text_field_tag "link_name", link_snippet.name, class: "form-control _link-target"

      .col-3
        = check_box_tag :field, "field", link_snippet.field?,
                        class: "_link-field-toggle", id: "link-editor-field"
        %label.form-check-label{for: "link-editor-field"} field

    .form-row.align-items-center.mb-4.ml-1.mr-1
      .col-12
        %label.form-check-label{for: "link_title"} Title
        = text_field_tag "link_title", link_snippet.title, class: "form-control _link-title"

  .card-footer.p-0
    .preview.mx-1.my-1.form-control-feedback
      = text_field_tag "preview", link_snippet.raw, class: "_link-preview w-100 text-muted", readonly: true
    %hr.mt-1.mb-1
    .form-group-inline.d-flex.justify-content-center.py-2
      = button_tag (modal_tm_snippet_editor? ? "Save and Close" : "Apply"), link_apply_opts.merge(class: "_link-apply btn-sm mr-3")
      %a.border-light.text-dark.btn.btn-sm.btn-outline-secondary{"data-dismiss": tm_snippet_editor_mode, href: "#"}
        = modal_tm_snippet_editor? ? "Cancel" : "Close"
