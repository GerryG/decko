<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README_Developers
  
    &mdash; Documentation by YARD 0.9.5
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "README_Developers";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README_Developers</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame" src="class_list.html"></iframe>

      <div id="content"><div id='filecontents'>
<h1 id="label-A+Developer-27s+introduction+to+the+Wagn-2FCard+code+base">A Developer&#39;s introduction to the Wagn/Card code base</h1>

<p>New folks should start here after playing with Wagn but before digging into
code.</p>

<h2 id="label-Intro">Intro</h2>

<h3 id="label-Am+I+in+the+right+place-3F">Am I in the right place?</h3>

<p>Yes, if:</p>
<ul><li>
<p><strong>you&#39;re a Ruby developer</strong>, or at least someone who does
not fear ruby code. <strong>Not a techie? <a href="http://wagn.org">Try
Wagn.org</a></strong></p>
</li><li>
<p><strong>you&#39;ve experimented with Wagn</strong> enough to know the
basics (cards, types, rules, etc.) <strong>No idea what a card is? <a
href="http://wagn.org">Try Wagn.org</a></strong>.</p>
</li><li>
<p><strong>you&#39;re looking at this page from a docs site</strong> (ie, NOT
GitHub) so you can use our links to navigate code. <strong>Links look
funny? <a href="http://rubydoc.info/gems/card">Try
rubydocs.info</a>.</strong></p>
</li></ul>

<h3 id="label-Is+Wagn+an+application+or+a+development+framework-3F">Is Wagn an <em>application</em> or a <em>development framework</em>?</h3>

<p>It&#39;s both.</p>

<p>When you install and “seed” a new Wagn project, you have a working “deck”
right away.  There are lots of things built in: account handling, edit
histories, default layouts, CSS, etc.  In other words: you have a basic
application.</p>

<p>But a newly seeded Deck is just a starting point. <strong>Wagn is a
development framework in which you start <em>in the middle of things</em>
rather than from scratch</strong>.  Seeding is a bit of a headstart, and it
means that designers, developers, and content creators can start working in
parallel on day 1. But the seeded cards don&#39;t determine what you can
build with Wagn; you can add things, you can remove things… In fact, you
can build pretty much whatever you want.</p>

<h3 id="label-Sets">Sets</h3>

<p><em>Cards</em> are the fundamental building blocks of Wagn, and
<em>Sets</em> are the fundamental pattern for organizing cards. Both
Wagneers and Wagn developers create web systems by applying <em>rules</em>
to <em>sets</em> of <em>cards</em>.</p>

<p>If you&#39;ve edited Rules through a card toolbar in any Wagn deck, you
will have encountered Sets. For example, imagine you&#39;re on a User card
named “Henry Tai”, and you decide to edit its structure.  When you edit its
rule, you will be prompted to choose the Set of cards to which the rule
applies, eg:</p>
<ul><li>
<p>Just “Henry Tai”</p>
</li><li>
<p>All Users</p>
</li><li>
<p>All Cards</p>
</li></ul>

<p>Depending on which Set you choose, the Rule in question will be applied to
a specific group of cards.</p>

<p>This same general pattern occurs in Wagn code: <strong>code rules (methods)
are organized under the Set of cards to which they apply.</strong></p>

<h3 id="label-MoFoS+Architecture">MoFoS Architecture</h3>

<p>Sets are central to Wagn&#39;s architecture.  Wagn is not, like Ruby on
Rails, an implementation of the “MVC” (Model-View-Controller) architectural
pattern.  Instead, we like to think that we&#39;re the first instance of a
new pattern that we call <em>MoFoS</em>.</p>

<p>MoFoS stands for “Model-Formats-Sets”: One Model, viewable in many Formats,
divisible into Sets.</p>

<p>In Wagn, the MoFoS “one model” is, as you may have guessed, the
<em>card</em>.</p>

<p>You may have also noticed that you can add .html (the default), .text,
.json, etc to any card&#39;s web path to receive the card&#39;s contents in
a different format. This is the Format in MoFos.</p>

<p>The great power of MoFoS, though, is in the Sets. Thanks to Sets, code
rules (and data rules) can be as narrow or specific as desired.  These
nonorthogonal groupings open up lots of exciting possibilities, and
they&#39;re a big part of what makes Wagn so much fun.</p>

<h3 id="label-Is+Wagn+Ruby+on+Rails-3F">Is Wagn Ruby on Rails?</h3>

<p>It&#39;s likely that many folks reading this are Ruby-on-Rails developers.
They&#39;ll find lots of familiar patterns in Wagn, and they may have
noticed that wagn depends upon rails gems.  We should be clear:
<strong>Wagn is a Rails descendant and owes a ton to the Rails community,
but Wagn is not Rails</strong>.</p>

<p>The main difference is that while Rails&#39; core pattern is creating new
things (especially models, views, and controllers), Wagn&#39;s core pattern
is subdividing exising things into new Sets.</p>

<p>Wagn mod developers do create lots of views (though they&#39;re quite
different from Rails views), but we never create new models or controllers.
In the Wagn gem there is one controller (CardController), one main model
(<span class='object_link'><a href="Card.html" title="Card (class)">Card</a></span>), and several other models to optimize the Card model and track its
history (<span class='object_link'><a href="Card/Reference.html" title="Card::Reference (class)">Card::Reference</a></span>, <span class='object_link'><a href="Card/Act.html" title="Card::Act (class)">Card::Act</a></span>, <span class='object_link'><a href="Card/Action.html" title="Card::Action (class)">Card::Action</a></span>, and
<span class='object_link'><a href="Card/Change.html" title="Card::Change (class)">Card::Change</a></span>).</p>

<p>Wagn&#39;s equivalent of creating a new model is configuring a new Set of
cards. Its equivalent of creating new actions on controllers is creating
new events that are conditionally triggered for a Set of cards.</p>

<p>Rails development experience is definitely a plus in getting to know Wagn,
but Wagn offers a new architecture, and lot of new possibilities.</p>

<h2 id="label-Mods">Mods</h2>

<p>A Wagn Mod is a discrete piece of Wagn functionality. If you want to
customize a Wagn deck in a way that can&#39;t be done on the site itself,
odds are you want a mod.</p>

<p>The most convenient way to add a mod is in the `mod` directory of your
deck, eg:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>mydeck</span><span class='regexp_end'>/mod</span></span><span class='op'>/</span><span class='id identifier rubyid_mymod'>mymod</span></code></pre>

<p>A mod can have several different directories: <em>chunk, format, layout,
set, set_pattern, spec, file, and lib</em>. Of these, the set directory is
by far the most important.</p>

<h3 id="label-Creating+a+mod+with+set+modules">Creating a mod with set modules</h3>

<p>Set modules are defined in a mod&#39;s set directory, eg:</p>

<pre class="code ruby"><code class="ruby">/mydeck/mod/mymod/set/</code></pre>

<p>For example, if your deck has Company cards, you can extend the behavior of
those cards by adding a set module like so:</p>

<pre class="code ruby"><code class="ruby"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>mydeck</span><span class='regexp_end'>/mod</span></span><span class='op'>/</span><span class='id identifier rubyid_mymod'>mymod</span><span class='op'>/</span><span class='id identifier rubyid_set'>set</span><span class='op'>/</span><span class='id identifier rubyid_type'>type</span><span class='op'>/</span><span class='id identifier rubyid_company'>company</span><span class='period'>.</span><span class='id identifier rubyid_rb'>rb</span></code></pre>

<p>Note that “company” here does not refer to its “name”, but rather its
“codename” (which an administrator might add to the Company card via the
RESTful web API with a url like</p>

<pre class="code ruby"><code class="ruby">/update/Company?card[codename]=company</code></pre>

<p>Generally speaking, code should never refer to a card by name; otherwise it
will break when the card is renamed.  Instead, it should use the codename,
which will continue to work even if the canonical name is changed.</p>

<p>The full path of a set module follows this pattern</p>

<pre class="code ruby"><code class="ruby">[mod dir]/set/[set_pattern](/[anchor])(/[additional]).rb</code></pre>

<h2 id="label-....more+coming+soon-21">.…more coming soon!</h2>
</div></div>

      <div id="footer">
  Generated on Mon Aug 15 13:02:51 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.5 (ruby-2.3.0).
</div>

    </div>
  </body>
</html>